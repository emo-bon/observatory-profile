{%- include './includes/prefixes.ttl' %}
@prefix ex: <http://example.org/> .
@prefix csvw: <http://www.w3.org/ns/csvw#> .

@base <{{baseurl}}> .

</measured_metadata> 
    a csvw:Table ;
    csvw:url </logsheet_schema_extended.csv> ; #to be replaced with url of the logsheet_schema_extended.csv file
    csvw:tableSchema </measured_metadata_schema> ;
.

# Define the table schema
</measured_metadata_schema> a csvw:TableSchema ; 
    csvw:column 
    {%- for row in sets['schema']%}
    {%- if row['LogsheetTab'] == 'Measured' and not row['LogsheetColumnTitle'].endswith('_method') %}
    <_:{{ row['LogsheetColumnTitle'].strip().replace(' ', '_') }}> {{ "," if not loop.last else "; " }}
    {%- endif %}
    {%- endfor %}
.


{%- for row in sets['schema']%}
{%- if row['LogsheetTab'] == 'Measured' and not row['LogsheetColumnTitle'].endswith('_method') %}
</measured_metadata_schema#col_{{ row['LogsheetColumnTitle'].strip().replace(' ', '_') }}>
    a csvw:Column ;
    csvw:titles "{{ row['LogsheetColumnTitle'] | xsd("string") }}" ;
    csvw:name {{ row['LogsheetColumnTitle'] | xsd("string") }} ;
    
    dct:description {{ row['LogsheetColumnDefinition'] | xsd("string") }} ;

    csvw:datatype {{ row['DataTypeOut'] | xsd("string")}} ;
    csvw:propertyUrl {{ row['Observable_property_url'] | xsd("anyURI") }} ;

{%- endif %}
{%- endfor %}