sediment_measured_task:
  func: subyt
  args:
    template_folder: !resolve "{observatory-profile}/templates"
    template_name: "sediment_measured.ldt.ttl"
    source: !resolve "{observatory-crate}/logsheets/transformed/sediment_measured.csv"
    extra_sources:
      observatory: !resolve "{observatory-crate}/logsheets/transformed/sediment_observatory.csv"
      schema: !resolve "{observatory-profile}/logsheet_schema_extended.csv"
    sink: !resolve "{observatory-crate}/sediment/observation/{{source_mat_id}}"
    variables:
      baseref: "http://data.emobon.embrc.eu"
    allow_repeated_sink_paths: true

sediment_observatory_task:
  func: subyt
  args:
    template_folder: !resolve "{observatory-profile}/templates"
    template_name: "sediment_observatory.ldt.ttl"
    source: !resolve "{observatory-crate}/logsheets/transformed/sediment_observatory.csv"
    extra_sources:
      schema: !resolve "{observatory-profile}/logsheet_schema_extended.csv"
    sink: !resolve "{observatory-crate}/sediment/observatory/{{obs_id}}"
    variables:
      baseref: "http://data.emobon.embrc.eu"
    allow_repeated_sink_paths: true

sediment_sampling_task:
  func: subyt
  args:
    template_folder: !resolve "{observatory-profile}/templates"
    template_name: "sediment_sampling.ldt.ttl"
    source: !resolve "{observatory-crate}/logsheets/transformed/sediment_sampling.csv"
    extra_sources:
      observatory: !resolve "{observatory-crate}/logsheets/transformed/sediment_observatory.csv"
      schema: !resolve "{observatory-profile}/logsheet_schema_extended.csv"
    sink: !resolve "{observatory-crate}/sediment/sampling-event/{{sampling_event}}"
    variables:
      baseref: "http://data.emobon.embrc.eu"
    allow_repeated_sink_paths: true
    unique_pattern: "{sampling_event}" 

sediment_sample_task:
  func: subyt
  args:
    template_folder: !resolve "{observatory-profile}/templates"
    template_name: "sediment_sample.ldt.ttl"
    source: !resolve "{observatory-crate}/logsheets/transformed/sediment_sampling.csv"
    extra_sources:
      observatory: !resolve "{observatory-crate}/logsheets/transformed/sediment_observatory.csv"
      schema: !resolve "{observatory-profile}/logsheet_schema_extended.csv"
    sink: !resolve "{observatory-crate}/sediment/sample/{{source_mat_id}}"
    variables:
      baseref: "http://data.emobon.embrc.eu"
    allow_repeated_sink_paths: true
